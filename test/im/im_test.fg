####### test_sync.fg

# to run, launch server and two clients, 'client1' and 'client2'

import '../mesh'
import '../test_director'
import 'im' # for port


director = [

    'run_tests' : function(self)

        self.login()
        self.presence()
        self.chat()

    end,

    #
    # test to create, rename, update, delete files
    #

    'login' : function(self)

        self.test_title('login')

        # signup
        self.im_direct('client1', 'signup', 'a', 'a')

    end,

    'im_direct' : function(self, whom, action, id, pw)

        title = action +' '+ id +','+ pw
        self.direct(title, whom, action, ['id':id, 'password':pw])

    end,


] + test_director

sys.print('test port ' + port)
mesh = Mesh.init(director.id, port, [director])
director.launch(mesh, '../../source/filagree', 'im_server.fg', 2, 'im_client.fg')
